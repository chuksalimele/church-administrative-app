<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Monetary</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

    </head>
    <body>

        <div data-role="header" style="overflow:hidden;">
            <a data-rel="back" class="ui-btn ui-btn-left ui-alt-icon ui-nodisc-icon ui-corner-all ui-btn-icon-notext ui-icon-carat-l">Back</a>
            <h1>Monetary</h1>
            <a href="#show-monetary-table" data-rel="popup" data-transition="slide" class="ui-btn-right ui-btn ui-btn-a ui-btn-inline ui-mini ui-corner-all ui-btn-icon-right ui-icon-check">View</a>
        </div><!-- /header -->


        <div data-role="popup" id="show-monetary-table" data-theme="a">
            <ul data-role="listview" data-inset="true" style="min-width:210px;">
                <li data-role="list-divider">Menu</li>
                <li class="monetary-show-banks-added"><a href="#">Banks</a></li>
                <li class="monetary-show-bank-accounts-added"><a href="#">Back accounts</a></li>
                <li class="monetary-show-denominatios-added"><a href="#">Currency denomination</a></li>
                <li class="monetary-show-service-income-category-added"><a href="#">Service income category</a></li>
                <li class="monetary-show-income-category-added"><a href="#">Income category</a></li>
                <li class="monetary-show-expense-category-added"><a href="#">Expense category</a></li>
            </ul>
        </div>

        <div class="ui-content">

            <div data-role="collapsibleset" data-theme="a" data-content-theme="a">
                <div data-role="collapsible">
                    <h3>Add Bank</h3>
                    <form method="post" action="php/add-bank.php" id="monetary-add-bank-form">

                        <div class="ui-grid-b  ui-responsive">
                            <div class="ui-block-a">
                                <div class="ui-field-contain">
                                    <label for="monetary-add-bank" >Bank name</label>
                                    <input data-clear-btn="true" name="monetary-add-bank" id="monetary-add-bank" type="text"/>
                                </div>
                                <div class="ui-field-contain">
                                    <input type="submit" value="Add Bank"/>
                                </div>
                            </div>
                            <div class="ui-block-b">

                            </div>
                            <div class="ui-block-c">
                                <div class="ui-field-contain">
                                    <a class="monetary-show-banks-added" href="#">Show banks added</a>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>


                <div data-role="collapsible" id="monetary-add-bank-account-bank-collapsible">
                    <h3>Add Bank Account</h3>
                    <form method="post" action="php/add-bank-account.php" id="monetary-add-bank-account-form">

                        <div class="ui-grid-b  ui-responsive">
                            <div class="ui-block-a">
                                <div class="ui-field-contain">
                                    <label for="monetary-add-bank-account-bank" >Bank</label>
                                    <select name="monetary-add-bank-account-bank" id="monetary-add-bank-account-bank" >
                                        <option value="">Select bank</option>
                                    </select>
                                </div>
                                <div class="ui-field-contain">
                                    <label for="monetary-add-bank-account-name" >Account name</label>
                                    <input data-clear-btn="true" name="monetary-add-bank-account-name" id="monetary-add-bank-account-name" type="text"/>
                                </div>
                                <div class="ui-field-contain">
                                    <label for="monetary-add-bank-account-no" >Account no.</label>
                                    <input data-clear-btn="true" name="monetary-add-bank-account-no" id="monetary-add-bank-account-no" type="text"/>
                                </div>
                                <div class="ui-field-contain">
                                    <input type="submit" value="Add Account Info"/>
                                </div>
                            </div>
                            <div class="ui-block-b">

                            </div>
                            <div class="ui-block-c">
                                <div class="ui-field-contain">
                                    <a  class="monetary-show-bank-accounts-added" href="#">Show bank accounts added</a>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>

                <div data-role="collapsible">
                    <h3>Add Currency denomination</h3>
                    <form method="post" action="php/add-denomination.php" id="monetary-add-denomination-form">

                        <div class="ui-grid-b  ui-responsive">
                            <div class="ui-block-a">
                                <div class="ui-field-contain">
                                    <label for="monetary-add-denomination" >Currency denomination</label>
                                    <input data-clear-btn="true" name="monetary-add-denomination" id="monetary-add-denomination" type="text"/>
                                </div>
                                <div class="ui-field-contain">
                                    <input type="submit" value="Add Denomination"/>
                                </div>
                            </div>
                            <div class="ui-block-b">

                            </div>
                            <div class="ui-block-c">
                                <div class="ui-field-contain">
                                    <a  class="monetary-show-denominatios-added" href="#">Show denominations added</a>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>

                <div data-role="collapsible">
                    <h3>Add Service Income Category</h3>
                    <form method="post" action="php/add-service-income-category.php" id="monetary-add-service-income-category-form">

                        <div class="ui-grid-b  ui-responsive">
                            <div class="ui-block-a">
                                <div class="ui-field-contain">
                                    <label for="monetary-add-service-income-category" >Service income category</label>
                                    <input data-clear-btn="true" name="monetary-add-service-income-category" id="monetary-add-service-income-category" type="text"/>
                                </div>
                                <div class="ui-field-contain">
                                    <input type="submit" value="Add Category"/>
                                </div>
                            </div>
                            <div class="ui-block-b">

                            </div>
                            <div class="ui-block-c">
                                <div class="ui-field-contain">
                                    <a  class="monetary-show-service-income-category-added" href="#">Show categories added</a>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>

                <div data-role="collapsible">
                    <h3>Add Income Category</h3>
                    <form method="post" action="php/add-income-category.php" id="monetary-add-income-category-form">

                        <div class="ui-grid-b  ui-responsive">
                            <div class="ui-block-a">
                                <div class="ui-field-contain">
                                    <label for="monetary-add-income-category" >Income category</label>
                                    <input data-clear-btn="true" name="monetary-add-income-category" id="monetary-add-income-category" type="text"/>
                                </div>
                                <div class="ui-field-contain">
                                    <input type="submit" value="Add Category"/>
                                </div>
                            </div>
                            <div class="ui-block-b">

                            </div>
                            <div class="ui-block-c">
                                <div class="ui-field-contain">
                                    <a class="monetary-show-income-category-added" href="#">Show categories added</a>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>

                <div data-role="collapsible">
                    <h3>Add Expense Category</h3>
                    <form method="post" action="php/add-expense-category.php" id="monetary-add-expense-category-form">

                        <div class="ui-grid-b  ui-responsive">
                            <div class="ui-block-a">
                                <div class="ui-field-contain">
                                    <label for="monetary-add-expense-category" >Expense category</label>
                                    <input data-clear-btn="true" name="monetary-add-expense-category" id="monetary-add-expense-category" type="text"/>
                                </div>
                                <div class="ui-field-contain">
                                    <input type="submit" value="Add Category"/>
                                </div>
                            </div>
                            <div class="ui-block-b">

                            </div>
                            <div class="ui-block-c">
                                <div class="ui-field-contain">
                                    <a class="monetary-show-expense-category-added" href="#">Show categories added</a>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>
            </div>



        </div>


        <script>

            $(document).ready(function () {


                $(document).bind("pagecreate", function (e, data) {
                    
                    $(".monetary-show-banks-added").on("click", function () {

                        ChurchApp.post("php/query-bank.php",
                                {
                                },
                                function (data) {//done
                                    alert(data);
                                    var json = JSON.parse(data);
                                    if (json.status === "success") {
                                        ChurchApp.changeAndRenderTablePage({
                                            tableTitle: json.data.table_title,
                                            tableColumns: json.data.table_columns,
                                            tableData: json.data.table_data,
                                            style: ChurchApp.DisplayStyle.A,
                                            pageId: "table-view-page-content",
                                            pageTitle: "Banks",
                                            headerTitle: "Showing Banks Added",
                                            updateUrl: "php/update-bank.php",
                                            deleteUrl: "php/delete-bank.php",
                                            inactivityTimeout: 180,
                                            useDefaultUneditables: true, //which are SN, ENTRY_USER_ID and ENTRY_DATETIME 
                                            uneditableColumns: ["SN", "ENTRY_USER_ID", "ENTRY_DATETIME", ],
                                            validationRules: {
                                                "BANK_NAME": "required"
                                            },
                                            validationMessages: {
                                                //"BANK_NAME": "Please enter this field."
                                            },
                                        });

                                    }
                                },
                                function (data, r, error) {//fail

                                });

                    });


                    $(".monetary-show-bank-accounts-added").on("click", function () {

                        ChurchApp.post("php/query-bank-account.php",
                                {
                                },
                                function (data) {//done
                                    alert(data);
                                    var json = JSON.parse(data);
                                    if (json.status === "success") {
                                        ChurchApp.changeAndRenderTablePage({
                                            tableTitle: json.data.table_title,
                                            tableColumns: json.data.table_columns,
                                            tableData: json.data.table_data,
                                            style: ChurchApp.DisplayStyle.A,
                                            pageId: "table-view-page-content",
                                            pageTitle: "Bank Accounts",
                                            headerTitle: "Showing Bank Accounts Added",
                                            updateUrl: "php/update-bank-account.php",
                                            deleteUrl: "php/delete-bank-account.php",
                                            inactivityTimeout: 180,
                                            useDefaultUneditables: true, //which are SN, ENTRY_USER_ID and ENTRY_DATETIME 
                                            //do not allow edit of BANK_NAME here - that should be done in table that shows only bankks
                                            uneditableColumns: ["SN", "BANK_NAME", "ENTRY_USER_ID", "ENTRY_DATETIME", ],
                                            validationRules: {
                                                "BANK_NAME": "required",
                                                "ACCOUNT_NAME": "required",
                                                "ACCOUNT_NO": "required",
                                            },
                                            validationMessages: {
                                                //"BANK_NAME": "Please enter this field."
                                            },
                                        });

                                    }
                                },
                                function (data, r, error) {//fail

                                });

                    });


                    $(".monetary-show-denominatios-added").on("click", function () {

                        ChurchApp.post("php/query-denomination.php",
                                {
                                },
                                function (data) {//done
                                    alert(data);
                                    var json = JSON.parse(data);
                                    if (json.status === "success") {
                                        ChurchApp.changeAndRenderTablePage({
                                            tableTitle: json.data.table_title,
                                            tableColumns: json.data.table_columns,
                                            tableData: json.data.table_data,
                                            style: ChurchApp.DisplayStyle.A,
                                            pageId: "table-view-page-content",
                                            pageTitle: "Currency Demonminatios",
                                            headerTitle: "Showing Currency Denominations Added",
                                            updateUrl: "php/update-denomination.php",
                                            deleteUrl: "php/delete-denomination.php",
                                            inactivityTimeout: 180,
                                            useDefaultUneditables: true, //which are SN, ENTRY_USER_ID and ENTRY_DATETIME 
                                            uneditableColumns: ["SN", "ENTRY_USER_ID", "ENTRY_DATETIME", ],
                                            validationRules: {
                                                "DENOMINATION": "required",
                                            },
                                            validationMessages: {
                                                //"DENOMINATION": "Please enter this field."
                                            },
                                        });

                                    }
                                },
                                function (data, r, error) {//fail

                                });

                    });

                    $(".monetary-show-service-income-category-added").on("click", function () {

                        ChurchApp.post("php/query-service-income-category.php",
                                {
                                },
                                function (data) {//done
                                    alert(data);
                                    var json = JSON.parse(data);
                                    if (json.status === "success") {
                                        ChurchApp.changeAndRenderTablePage({
                                            tableTitle: json.data.table_title,
                                            tableColumns: json.data.table_columns,
                                            tableData: json.data.table_data,
                                            style: ChurchApp.DisplayStyle.A,
                                            pageId: "table-view-page-content",
                                            pageTitle: "Service Income Categories",
                                            headerTitle: "Showing Service Income Categories Added",
                                            updateUrl: "php/update-service-income-category.php",
                                            deleteUrl: "php/delete-service-income-category.php",
                                            inactivityTimeout: 180,
                                            useDefaultUneditables: true, //which are SN, ENTRY_USER_ID and ENTRY_DATETIME 
                                            uneditableColumns: ["SN", "ENTRY_USER_ID", "ENTRY_DATETIME", ],
                                            validationRules: {
                                                "SERVICE_INCOME_CATEGORY": "required"
                                            },
                                            validationMessages: {
                                                //"SERVICE_INCOME_CATEGORY": "Please enter this field."
                                            },
                                        });

                                    }
                                },
                                function (data, r, error) {//fail

                                });

                    });

                    $(".monetary-show-income-category-added").on("click", function () {

                        ChurchApp.post("php/query-income-category.php",
                                {
                                },
                                function (data) {//done
                                    alert(data);
                                    var json = JSON.parse(data);
                                    if (json.status === "success") {
                                        ChurchApp.changeAndRenderTablePage({
                                            tableTitle: json.data.table_title,
                                            tableColumns: json.data.table_columns,
                                            tableData: json.data.table_data,
                                            style: ChurchApp.DisplayStyle.A,
                                            pageId: "table-view-page-content",
                                            pageTitle: "Income Categories",
                                            headerTitle: "Showing Income Categories Added",
                                            updateUrl: "php/update-income-category.php",
                                            deleteUrl: "php/delete-income-category.php",
                                            inactivityTimeout: 180,
                                            useDefaultUneditables: true, //which are SN, ENTRY_USER_ID and ENTRY_DATETIME 
                                            uneditableColumns: ["SN", "ENTRY_USER_ID", "ENTRY_DATETIME", ],
                                            validationRules: {
                                                "INCOME_CATEGORY": "required"
                                            },
                                            validationMessages: {
                                                //"INCOME_CATEGORY": "Please enter this field."
                                            },
                                        });

                                    }
                                },
                                function (data, r, error) {//fail

                                });

                    });


                    $(".monetary-show-expense-category-added").on("click", function () {

                        ChurchApp.post("php/query-expense-category.php",
                                {
                                },
                                function (data) {//done
                                    alert(data);
                                    var json = JSON.parse(data);
                                    if (json.status === "success") {
                                        ChurchApp.changeAndRenderTablePage({
                                            tableTitle: json.data.table_title,
                                            tableColumns: json.data.table_columns,
                                            tableData: json.data.table_data,
                                            style: ChurchApp.DisplayStyle.A,
                                            pageId: "table-view-page-content",
                                            pageTitle: "Expense Categories",
                                            headerTitle: "Showing Expenses Categories Added",
                                            updateUrl: "php/update-expense-category.php",
                                            deleteUrl: "php/delete-expense-category.php",
                                            inactivityTimeout: 180,
                                            useDefaultUneditables: true, //which are SN, ENTRY_USER_ID and ENTRY_DATETIME 
                                            uneditableColumns: ["SN", "ENTRY_USER_ID", "ENTRY_DATETIME", ],
                                            validationRules: {
                                                "EXPENSE_CATEGORY": "required"
                                            },
                                            validationMessages: {
                                                //"EXPENSE_CATEGORY": "Please enter this field."
                                            },
                                        });

                                    }
                                },
                                function (data, r, error) {//fail

                                });

                    });

                    $("#monetary-add-bank-account-bank").on("click", function () {

                        ChurchApp.post("php/get-bank-list.php",
                                {
                                },
                                function (data) {//done
                                    var json = JSON.parse(data);
                                    if (json.status === "success") {
                                        ChurchApp.comboBoxPopulate("monetary-add-bank-account-bank", json.data);
                                    }
                                },
                                function (data, r, error) {//fail

                                });
                    });

                    //add department validation
                    $("#department-form").validate({
                        //validation rules
                        rules: {
                            "department": "required"
                        },
                        //custom validation message
                        messages: {
                        },
                        submitHandler: function (form) {

                            ChurchApp.postForm(form,
                                    function (data) {//done
                                        alert(data);
                                    },
                                    function (data, r, error) {//fail

                                    });
                        }

                    });

                    //add designation validation
                    $("#designation-form").validate({
                        //validation rules
                        rules: {
                            "designation": "required"
                        },
                        //custom validation message
                        messages: {
                        },
                        submitHandler: function (form) {

                            ChurchApp.postForm(form,
                                    function (data) {//done
                                        alert(data);
                                    },
                                    function (data, r, error) {//fail

                                    });
                        }

                    });


                    //assign to parish validation
                    $("#assign-to-parish-form").validate({
                        //validation rules
                        rules: {
                            "assign-to-parish-name": "required",
                            "assign-to-parish-under-national": {
                                enterFieldShowing: true, //custom validation method name - see above
                            },
                            "assign-to-parish-under-region": {
                                enterFieldShowing: true, //custom validation method name - see above
                            },
                            "assign-to-parish-under-province": {
                                enterFieldShowing: true, //custom validation method name - see above
                            },
                            "assign-to-parish-under-zone": {
                                enterFieldShowing: true, //custom validation method name - see above
                            },
                            "assign-to-parish-under-area": {
                                enterFieldShowing: true, //custom validation method name - see above
                            }
                        },
                        //custom validation message
                        messages: {
                        },
                        submitHandler: function (form) {

                            ChurchApp.post(form.action,
                                    {
                                        parish_sn: $("#assign-to-parish-name").val(),
                                        username: ChurchApp.SignUpInfo.username,
                                        first_name: ChurchApp.SignUpInfo.firstName,
                                        last_name: ChurchApp.SignUpInfo.lastName,
                                        email: ChurchApp.SignUpInfo.email,
                                    },
                                    function (data) {//done

                                        alert(data);

                                        var json = JSON.parse(data);

                                        if (json.status === "success") {
                                            ChurchApp.verifyUserEmail(json.data);
                                        } else {
                                            ChurchApp.alertResponse(json, true);
                                        }

                                    },
                                    function (data, r, error) {//fail

                                    });
                        }

                    });

                    //add bank validation
                    $("#monetary-add-bank-form").validate({
                        //validation rules
                        rules: {
                            "monetary-add-bank": "required"
                        },
                        //custom validation message
                        messages: {
                        },
                        submitHandler: function (form) {

                            ChurchApp.postForm(form,
                                    function (data) {//done
                                        alert(data);
                                    },
                                    function (data, r, error) {//fail

                                    });
                        }

                    });

                    //add bank account validation
                    $("#monetary-add-bank-account-form").validate({
                        //validation rules
                        rules: {
                            "monetary-add-bank-account-name": "required",
                            "monetary-add-bank-account-no": "required",
                            "monetary-add-bank-account-bank": "required",
                            /*"monetary-add-bank-account-bank":{
                             workaroundComboboxValidateEmpty :true,  
                             }*/
                        },
                        //custom validation message
                        messages: {
                        },
                        submitHandler: function (form) {

                            ChurchApp.postForm(form,
                                    function (data) {//done
                                        alert(data);
                                    },
                                    function (data, r, error) {//fail

                                    });
                        }

                    });

                    //add denomination validation
                    $("#monetary-add-denomination-form").validate({
                        //validation rules
                        rules: {
                            "monetary-add-denomination": "required"
                        },
                        //custom validation message
                        messages: {
                        },
                        submitHandler: function (form) {

                            ChurchApp.postForm(form,
                                    function (data) {//done
                                        alert(data);
                                    },
                                    function (data, r, error) {//fail

                                    });
                        }

                    });

                    //add service income category validation
                    $("#monetary-add-service-income-category-form").validate({
                        //validation rules
                        rules: {
                            "monetary-add-service-income-category": "required"
                        },
                        //custom validation message
                        messages: {
                        },
                        submitHandler: function (form) {

                            ChurchApp.postForm(form,
                                    function (data) {//done
                                        alert(data);
                                    },
                                    function (data, r, error) {//fail

                                    });
                        }

                    });


                    //add income category validation
                    $("#monetary-add-income-category-form").validate({
                        //validation rules
                        rules: {
                            "monetary-add-income-category": "required"
                        },
                        //custom validation message
                        messages: {
                        },
                        submitHandler: function (form) {

                            ChurchApp.postForm(form,
                                    function (data) {//done
                                        alert(data);
                                    },
                                    function (data, r, error) {//fail

                                    });
                        }

                    });

                    //add expense category validation
                    $("#monetary-add-expense-category-form").validate({
                        //validation rules
                        rules: {
                            "monetary-add-expense-category": "required"
                        },
                        //custom validation message
                        messages: {
                        },
                        submitHandler: function (form) {

                            ChurchApp.postForm(form,
                                    function (data) {//done
                                        alert(data);
                                    },
                                    function (data, r, error) {//fail

                                    });
                        }

                    });

                });
            });


        </script>

    </body>
</html>
